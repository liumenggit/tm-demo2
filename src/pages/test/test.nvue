<template>
  <tm-app>
<!--    <tm-overlay :show="true"></tm-overlay>-->
    <view id="jintian" class="jintian" style="width: 10vw;height: 10vw;background-color: #00bcd4"></view>
    <tm-guide ref="easyGuide" ></tm-guide>
    <tm-button @click="test()" label="获取当前"></tm-button>
  </tm-app>
</template>
<script lang="ts" setup>
import {ref, getCurrentInstance, computed} from "vue"

const {proxy} = getCurrentInstance()
//定义页面id
const parentNameId = "tmWaterfallId";

function test() {
  console.log('test')
  proxy.$refs.easyGuide.startGuide([
    {queryClass: '.jintian'}
  ], 0)
}

//给组件使用此方法
function getReactInfo(queryClass: string) {
  return new Promise((resolve, reject) => {
    const query = uni.createSelectorQuery().in(proxy);
    query.select(queryClass).boundingClientRect((result) => {
      if (result) {
        resolve(result);
      } else {
        reject();
      }
    }).exec();
  })
}

defineExpose({parentNameId: parentNameId, getReactInfo});


import tmGuide from "@/tmui/components/tm-guide/tm-guide.vue"


</script>